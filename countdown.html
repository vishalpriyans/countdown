<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EUREKATHON 3.0 - Countdown</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
    <style>
      html,
      body {
        font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Liberation Sans", sans-serif;
      }

      #curtainOverlay {
        position: fixed;
        inset: 0;
        z-index: 9999;
        display: none;
        pointer-events: none;
      }

      #curtainOverlay.is-active {
        display: block;
      }

      .curtain-panel {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 50vw;
        background: linear-gradient(180deg, rgba(2, 6, 23, 0.98), rgba(15, 23, 42, 0.98));
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.06);
      }

      .curtain-panel.left {
        left: 0;
        transform: translateX(0);
      }

      .curtain-panel.right {
        right: 0;
        transform: translateX(0);
      }

      #curtainOverlay.is-opening .curtain-panel.left {
        animation: curtain-left-open 900ms cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
      }

      #curtainOverlay.is-opening .curtain-panel.right {
        animation: curtain-right-open 900ms cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
      }

      #curtainOverlay .curtain-seam {
        position: absolute;
        left: 50%;
        top: 0;
        height: 100%;
        width: 2px;
        transform: translateX(-1px);
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.0),
          rgba(255, 255, 255, 0.18),
          rgba(255, 255, 255, 0.0)
        );
        opacity: 0.65;
      }

      @keyframes curtain-left-open {
        to {
          transform: translateX(-105%);
        }
      }

      @keyframes curtain-right-open {
        to {
          transform: translateX(105%);
        }
      }
    </style>
  </head>

  <body>
    <div class="min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 flex flex-col items-center justify-center p-6 relative overflow-hidden">
      <div class="absolute inset-0 bg-[radial-gradient(circle_at_20%_10%,rgba(99,102,241,0.18),transparent_40%),radial-gradient(circle_at_80%_90%,rgba(14,165,233,0.14),transparent_45%)]"></div>

      <div class="relative w-full max-w-2xl rounded-2xl border border-white/10 bg-white/[0.06] shadow-[0_18px_60px_rgba(0,0,0,0.45)] backdrop-blur-xl">
        <div class="px-8 pt-8 pb-6 border-b border-white/10">
          <div class="text-center">
            <div class="text-white/70 text-xs tracking-[0.22em] uppercase">Department of CST · DSU-SOE, Harohalli</div>
            <h1 class="mt-2 text-3xl sm:text-4xl font-extrabold text-white tracking-tight">EUREKATHON 3.0</h1>
            <div class="mt-1 text-white/60 text-sm">Hackathon Countdown · 22 hours</div>
            <div class="mt-4 flex flex-col sm:flex-row items-center justify-center gap-2 sm:gap-3 text-xs text-white/60">
              <div class="rounded-full border border-white/10 bg-white/5 px-3 py-1">Start: 11:00 AM (Day 1)</div>
              <div class="hidden sm:block text-white/30">|</div>
              <div class="rounded-full border border-white/10 bg-white/5 px-3 py-1">End: 9:00 AM (Day 2)</div>
            </div>
          </div>
        </div>

        <div class="px-8 pt-6">
          <div class="rounded-xl border border-white/10 bg-black/20 px-4 py-3 text-center">
            <div class="text-[11px] uppercase tracking-[0.18em] text-white/45">Current Phase</div>
            <div id="phase" class="mt-1 text-lg font-semibold text-indigo-200">Opening and Setup</div>
          </div>
        </div>

        <div class="px-8 pt-6">
          <div class="grid grid-cols-3 gap-3 sm:gap-4">
            <div class="rounded-2xl border border-white/10 bg-white/[0.04] px-4 py-5 text-center">
              <div id="hours" class="text-5xl font-semibold text-white tabular-nums">22</div>
              <div class="mt-2 text-[11px] uppercase tracking-[0.2em] text-white/50">Hours</div>
            </div>
            <div class="rounded-2xl border border-white/10 bg-white/[0.04] px-4 py-5 text-center">
              <div id="minutes" class="text-5xl font-semibold text-white tabular-nums">00</div>
              <div class="mt-2 text-[11px] uppercase tracking-[0.2em] text-white/50">Minutes</div>
            </div>
            <div class="rounded-2xl border border-white/10 bg-white/[0.04] px-4 py-5 text-center">
              <div id="seconds" class="text-5xl font-semibold text-white tabular-nums">00</div>
              <div class="mt-2 text-[11px] uppercase tracking-[0.2em] text-white/50">Seconds</div>
            </div>
          </div>
        </div>

        <div class="px-8 pt-6">
          <div class="rounded-2xl border border-white/10 bg-white/[0.04] px-5 py-4">
            <div class="flex items-center justify-between text-xs text-white/55">
              <span>Progress</span>
              <span id="progressText" class="text-white/75 font-medium">0.0% Complete</span>
            </div>
            <div class="mt-3 h-2 rounded-full bg-white/10 overflow-hidden">
              <div id="progressBar" class="h-full bg-gradient-to-r from-indigo-400 via-sky-400 to-cyan-300 transition-all duration-1000" style="width: 0%"></div>
            </div>
            <div class="mt-3 flex items-center justify-between text-[11px] uppercase tracking-[0.2em] text-white/40">
              <span>11:00</span>
              <span>09:00</span>
            </div>
          </div>
        </div>

        <div class="px-8 pt-6 pb-8">
          <div class="flex flex-col sm:flex-row gap-3 justify-center">
            <button
              id="startPauseBtn"
              type="button"
              class="w-full sm:w-auto rounded-xl border border-white/15 bg-white/10 px-6 py-3 text-sm font-semibold text-white hover:bg-white/15 active:bg-white/20 transition"
            >
              Start
            </button>
            <button
              id="fullscreenBtn"
              type="button"
              class="w-full sm:w-auto rounded-xl border border-white/15 bg-transparent px-6 py-3 text-sm font-semibold text-white/80 hover:bg-white/5 hover:text-white transition"
            >
              Full Screen
            </button>
            <button
              id="resetBtn"
              type="button"
              class="w-full sm:w-auto rounded-xl border border-white/15 bg-transparent px-6 py-3 text-sm font-semibold text-white/80 hover:bg-white/5 hover:text-white transition"
            >
              Reset
            </button>
          </div>

          <div id="finished" class="hidden mt-5 rounded-xl border border-emerald-400/20 bg-emerald-500/10 px-5 py-4">
            <div class="text-sm font-semibold text-emerald-200">Time completed</div>
            <div class="mt-1 text-xs text-white/60">Submissions closed</div>
          </div>
        </div>
      </div>

      <div class="relative mt-6 text-center text-white/45 text-xs">
        <p class="font-medium text-white/55">Powered by Surviant</p>
      </div>
    </div>

    <div id="curtainOverlay" aria-hidden="true">
      <div class="curtain-panel left"></div>
      <div class="curtain-panel right"></div>
      <div class="curtain-seam"></div>
    </div>

    <script>
      const totalSeconds = 22 * 60 * 60;
      let secondsLeft = totalSeconds;
      let isRunning = false;
      let isFinished = false;
      let intervalId = null;

      const elHours = document.getElementById('hours');
      const elMinutes = document.getElementById('minutes');
      const elSeconds = document.getElementById('seconds');
      const elPhase = document.getElementById('phase');
      const elProgressBar = document.getElementById('progressBar');
      const elProgressText = document.getElementById('progressText');
      const elStartPause = document.getElementById('startPauseBtn');
      const elFullscreen = document.getElementById('fullscreenBtn');
      const elReset = document.getElementById('resetBtn');
      const elFinished = document.getElementById('finished');

      function formatNum(num) {
        return String(num).padStart(2, '0');
      }

      function getPhase(hoursRemaining) {
        const hoursElapsed = 22 - hoursRemaining;
        if (hoursElapsed < 1) return { phase: 'Opening and Setup', color: 'text-indigo-200' };
        if (hoursElapsed < 3) return { phase: 'Hacking Phase 1', color: 'text-emerald-200' };
        if (hoursElapsed < 4) return { phase: 'Lunch Break', color: 'text-amber-200' };
        if (hoursElapsed < 7) return { phase: 'Hacking Phase 2', color: 'text-emerald-200' };
        if (hoursElapsed < 8) return { phase: 'Snacks Break', color: 'text-orange-200' };
        if (hoursElapsed < 11) return { phase: 'Hacking Phase 3', color: 'text-emerald-200' };
        if (hoursElapsed < 12) return { phase: 'Dinner Break', color: 'text-amber-200' };
        if (hoursElapsed < 20) return { phase: 'Overnight Coding', color: 'text-violet-200' };
        if (hoursElapsed < 21) return { phase: 'Breakfast', color: 'text-orange-200' };
        if (hoursElapsed < 22) return { phase: 'Final Submission', color: 'text-rose-200' };
        return { phase: "Time's Up", color: 'text-rose-200' };
      }

      function render() {
        const hours = Math.floor(secondsLeft / 3600);
        const minutes = Math.floor((secondsLeft % 3600) / 60);
        const seconds = secondsLeft % 60;

        elHours.textContent = formatNum(hours);
        elMinutes.textContent = formatNum(minutes);
        elSeconds.textContent = formatNum(seconds);

        const progress = ((totalSeconds - secondsLeft) / totalSeconds) * 100;
        elProgressBar.style.width = `${progress}%`;
        elProgressText.textContent = `${progress.toFixed(1)}% Complete`;

        const phase = getPhase(hours);
        elPhase.textContent = phase.phase;
        elPhase.className = `mt-1 text-lg font-semibold ${phase.color}`;

        elFinished.classList.toggle('hidden', !isFinished);

        if (!isRunning) {
          elStartPause.textContent = 'Start';
        } else {
          elStartPause.textContent = 'Pause';
        }
      }

      function stopInterval() {
        if (intervalId !== null) {
          window.clearInterval(intervalId);
          intervalId = null;
        }
      }

      function startInterval() {
        stopInterval();
        intervalId = window.setInterval(() => {
          if (!isRunning || secondsLeft <= 0) return;
          secondsLeft -= 1;

          if (secondsLeft <= 0) {
            secondsLeft = 0;
            isRunning = false;
            isFinished = true;
            stopInterval();
          }
          render();
        }, 1000);
      }

      function playCurtain() {
        const overlay = document.getElementById('curtainOverlay');
        if (!overlay) return;
        overlay.classList.remove('is-opening');
        overlay.classList.add('is-active');

        void overlay.offsetWidth;
        overlay.classList.add('is-opening');
        window.setTimeout(() => {
          overlay.classList.remove('is-opening');
          overlay.classList.remove('is-active');
        }, 950);
      }

      function isFullscreen() {
        return Boolean(document.fullscreenElement);
      }

      function updateFullscreenButton() {
        if (!elFullscreen) return;
        elFullscreen.textContent = isFullscreen() ? 'Exit Full Screen' : 'Full Screen';
      }

      async function toggleFullscreen() {
        const target = document.documentElement;
        try {
          if (!isFullscreen()) {
            if (target.requestFullscreen) {
              await target.requestFullscreen();
            }
          } else {
            if (document.exitFullscreen) {
              await document.exitFullscreen();
            }
          }
        } finally {
          updateFullscreenButton();
        }
      }

      elStartPause.addEventListener('click', () => {
        if (isFinished && secondsLeft === 0) return;
        const willStart = !isRunning;
        isRunning = !isRunning;
        if (willStart) {
          playCurtain();
          if (typeof confetti === 'function') {
            confetti({
              particleCount: 140,
              spread: 70,
              startVelocity: 45,
              scalar: 0.9,
              ticks: 220,
              origin: { x: 0.5, y: 0.3 }
            });
          }
          startInterval();
        }
        render();
      });

      elReset.addEventListener('click', () => {
        isRunning = false;
        isFinished = false;
        secondsLeft = totalSeconds;
        stopInterval();
        render();
      });

      if (elFullscreen) {
        elFullscreen.addEventListener('click', () => {
          void toggleFullscreen();
        });
      }

      document.addEventListener('fullscreenchange', () => {
        updateFullscreenButton();
      });

      render();
      updateFullscreenButton();
    </script>
  </body>
</html>